# 型定義ユニット (共通で利用されるため先に定義)
型定義:
  types/database.ts:
    状態: 生成完了
    依存先相対パス: []
    依存元相対パス:
      - server/api/profile/update.post.ts
      - composables/profile/useProfile.ts
      - composables/auth/useRegister.ts
      - composables/auth/useLogin.ts
      - composables/account/useAccount.ts
      - composables/useSupabaseClient.ts
      - server/utils/supabaseServiceRole.ts
  types/index.ts:
    状態: 生成完了
    依存先相対パス: []
    依存元相対パス:
      - server/api/profile/update.post.ts
      - composables/profile/useProfile.ts
      - composables/auth/useRegister.ts
      - composables/auth/useLogin.ts
      - composables/auth/useAccountUtils.ts
      - composables/account/useAccount.ts
      - pages/profile/edit.vue # ProfileUpdatePayload
      - composables/account/useAccount.ts
  依存先ユニット: []
  依存元ユニット:
    - プロフィールAPI
    - プロフィール表示・編集

    - ユーザー登録
    - ユーザーログイン
    - アカウント削除
  状態: 生成完了
  ユニット生成順: 0

# --- ここから挿入 ---
プラグイン:
  plugins/supabase.ts:
    状態: 生成完了
    依存先相対パス: []
    依存元相対パス:
      - composables/profile/useProfile.ts
      - composables/auth/useRegister.ts
      - composables/auth/useLogin.ts
      - composables/auth/useAccountUtils.ts
      - composables/account/useAccount.ts
      - composables/useSupabaseClient.ts
      - tests/auth/register.spec.ts
      - tests/auth/login.spec.ts
      - tests/profile/edit.spec.ts
      - tests/account/delete.spec.ts
      - layouts/default.vue
  依存先ユニット: []
  依存元ユニット:
    - プロフィール表示・編集
    - ユーザー登録
    - ユーザーログイン
    - アカウント削除
  状態: 生成完了
  ユニット生成順: 0.5

アプリケーション:
  app.vue:
    状態: 生成完了
    依存先相対パス:
      - layouts/default.vue
    依存元相対パス: []
  依存先ユニット:
    - レイアウト
  依存元ユニット: []
  状態: 生成完了
  ユニット生成順: 1

レイアウト:
  layouts/default.vue:
    状態: 生成完了
    依存先相対パス:
      - pages/register.vue # Navigational
      - pages/login.vue # Navigational
      - composables/useSupabaseUser.ts
    依存元相対パス:
      - app.vue
      - tests/index.spec.ts
      - tests/auth/login.spec.ts
      - tests/auth/register.spec.ts
      - tests/profile/profile.spec.ts
      - tests/account/delete.spec.ts
  依存先ユニット: []
  依存元ユニット:
    - アプリケーション
    - ホームページ
    - ユーザー登録
    - ユーザーログイン
    - プロフィール表示・編集
    - アカウント削除
  状態: 生成完了
  ユニット生成順: 2

ホームページ:
  pages/index.vue:
    状態: 生成完了
    依存先相対パス: []
    依存元相対パス:
      - tests/index.spec.ts
  tests/index.spec.ts:
    状態: 生成完了
    依存先相対パス:
      - pages/index.vue
      - layouts/default.vue
    依存元相対パス: []
  依存先ユニット:
    - レイアウト
  依存元ユニット: []
  状態: 生成完了
  ユニット生成順: 3

ユーザー登録:
  tests/auth/register.spec.ts:
    状態: 生成完了
    依存先相対パス:
      - pages/register.vue
      - layouts/default.vue
      - supabase/functions/register-user/register-user-function.ts # 機能依存: ユーザー登録関数
    依存元相対パス: []
  composables/auth/useRegister.ts:
    状態: 生成完了
    依存先相対パス:
      - types/index.ts
      - supabase/functions/register-user/register-user-function.ts # 機能依存: ユーザー登録関数呼び出し
      - composables/useSupabaseClient.ts
    依存元相対パス:
      - pages/register.vue
  pages/register.vue:
    状態: 生成完了
    依存先相対パス:
      - composables/auth/useRegister.ts
      - layouts/default.vue
    依存元相対パス:
      - tests/auth/register.spec.ts
      - layouts/default.vue
      - tests/auth/login.spec.ts # beforeEach
      - tests/profile/profile.spec.ts # beforeEach
      - tests/account/delete.spec.ts # beforeEach
  supabase/functions/register-user/register-user-function.ts:
    状態: 生成完了
    依存先相対パス: []
    依存元相対パス:
      - composables/auth/useRegister.ts
      - tests/auth/register.spec.ts
      - tests/auth/login.spec.ts
  依存先ユニット:
    - レイアウト
    - 型定義

  依存元ユニット:
    - レイアウト
    - ユーザーログイン
    - プロフィール表示・編集
    - アカウント削除
  状態: 生成完了
  ユニット生成順: 4

ユーザーログイン:
  pages/login.vue:
    状態: 生成完了
    依存先相対パス:
      - composables/auth/useLogin.ts
      - layouts/default.vue
      - composables/useSupabaseUser.ts
    依存元相対パス:
      - tests/auth/login.spec.ts
      - layouts/default.vue
      - tests/profile/profile.spec.ts # beforeEach
      - tests/account/delete.spec.ts # beforeEach
  composables/auth/useLogin.ts:
    状態: 生成完了
    依存先相対パス:
      - types/index.ts
      - composables/auth/useAccountUtils.ts
      - composables/useSupabaseClient.ts
    依存元相対パス:
      - pages/login.vue
      - supabase/functions/register-user/register-user-function.ts # 機能依存: テスト前処理用ユーザー登録
  tests/auth/login.spec.ts:
    状態: 生成完了
    依存先相対パス:
      - pages/login.vue
      - pages/register.vue # beforeEach で利用
      - layouts/default.vue
      - supabase/functions/register-user/register-user-function.ts # beforeEach で利用
    依存元相対パス: []
  依存先ユニット:
    - レイアウト
    - 型定義
    - ユーザー登録

  依存元ユニット:
    - レイアウト
    - プロフィール表示・編集
    - アカウント削除
  状態: 生成完了
  ユニット生成順: 5

プロフィールAPI:
  server/api/profile/update.post.ts:
    状態: 生成完了
    依存先相対パス:
      - types/database.ts
      - types/index.ts
      - server/utils/supabaseServiceRole.ts
    依存元相対パス:
      - composables/profile/useProfile.ts
  依存先ユニット:
    - 型定義

  依存元ユニット:
    - プロフィール表示・編集
  状態: 生成完了
  ユニット生成順: 5.5

プロフィール表示・編集:
  composables/profile/useProfile.ts:
    状態: 生成完了
    依存先相対パス:
      - types/database.ts
      - types/index.ts
      - composables/useSupabaseClient.ts
      - composables/useSupabaseUser.ts
    依存元相対パス:
      - pages/profile/index.vue
      - pages/profile/edit.vue
  pages/profile/index.vue:
    状態: 生成完了
    依存先相対パス:
      - composables/profile/useProfile.ts
      - layouts/default.vue
      - pages/profile/edit.vue # Navigational
      - composables/useSupabaseUser.ts
    依存元相対パス:
      - tests/profile/profile.spec.ts
      - pages/profile/edit.vue # Navigational
  pages/profile/edit.vue:
    状態: 生成完了
    依存先相対パス:
      - composables/profile/useProfile.ts
      - types/index.ts
      - layouts/default.vue
      - composables/account/useAccount.ts
      - composables/useSupabaseClient.ts
      - composables/useSupabaseUser.ts
      - pages/profile/index.vue # Navigational
    依存元相対パス:
      - tests/profile/profile.spec.ts
      - pages/profile/index.vue
  tests/profile/profile.spec.ts:
    状態: 生成完了
    依存先相対パス:
      - pages/profile/index.vue
      - pages/profile/edit.vue
      - pages/register.vue # beforeEach
      - pages/login.vue # beforeEach
      - layouts/default.vue
      - composables/useSupabaseClient.ts
    依存元相対パス:
      - composables/account/useAccount.ts
      # 他の認証関連 Composable (useRegister, useLogin) も将来的に依存する可能性
  composables/useSupabaseClient.ts:
    状態: 生成完了
    依存先相対パス:
      - types/database.ts
      # - types/index.ts # 削除: プラグインから取得するため不要に
      # - server/utils/supabaseServiceRole.ts # 削除: クライアント作成ロジックがないため不要に
    依存元相対パス:
      - composables/useSupabaseUser.ts
      - composables/auth/useRegister.ts
      - composables/auth/useLogin.ts
      - composables/profile/useProfile.ts
      - composables/account/useAccount.ts
      - pages/auth/confirm.vue
  composables/useSupabaseUser.ts:
    状態: 生成完了
    依存先相対パス:
      # - plugins/supabase.ts # 削除
    依存元相対パス:
      - pages/profile/edit.vue
      - pages/profile/index.vue
      - layouts/default.vue # 追加: レイアウトでも利用
  server/utils/supabaseServerClient.ts:
    状態: 生成完了
    依存先相対パス: []
    依存元相対パス:
      - server/api/profile/update.post.ts
      - server/api/account.delete.ts
  server/utils/supabaseServiceRole.ts:
    状態: 生成完了
    依存先相対パス:
      - types/database.ts
    依存元相対パス:
      - server/api/profile/update.post.ts
      - server/api/account.delete.ts
  依存先ユニット:
    - 型定義
    - プラグイン # 追加

    - ユーザー登録
    - ユーザーログイン
    - プロフィールAPI
    - プロフィール表示・編集
    - アカウント削除
    - レイアウト
  状態: 生成完了
  ユニット生成順: 6

アカウント削除:
  composables/account/useAccount.ts:
    状態: 生成完了
    依存先相対パス:
      - types/index.ts
      - server/api/account.delete.ts # 機能依存: アカウント削除APIエンドポイント
      - composables/useSupabaseClient.ts
      - composables/useSupabaseUser.ts
    依存元相対パス:
      - pages/profile/edit.vue
  tests/account/delete.spec.ts:
    状態: 生成完了
    依存先相対パス:
      - pages/profile/edit.vue
      - pages/register.vue
      - pages/login.vue
      - layouts/default.vue
  依存先ユニット:
    - 型定義
    # - プラグイン # 削除

    - ユーザー登録
    - ユーザーログイン
    - プロフィール表示・編集
    - アカウント削除API
  依存元ユニット: []
  状態: 生成完了
  ユニット生成順: 7

アカウント削除API:
  server/api/account.delete.ts:
    状態: 生成完了
    依存先相対パス:
      - server/utils/supabaseServerClient.ts
      - supabase/functions/delete-user/delete-user-function.ts
    依存元相対パス:
      - composables/account/useAccount.ts
  依存先ユニット:

    - supabase/functions/delete-user
  依存元ユニット:
    - アカウント削除
  状態: 生成完了
  ユニット生成順: 6.5
